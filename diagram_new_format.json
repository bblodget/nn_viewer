{
  "primitives": [
    {
      "id": "x0",
      "type": "input",
      "label": "x₀",
      "position": { "cycle": 0, "row": 1 }
    },
    {
      "id": "w0",
      "type": "input",
      "label": "w₀",
      "position": { "cycle": 0, "row": 2 }
    },
    {
      "id": "x1",
      "type": "input",
      "label": "x₁",
      "position": { "cycle": 0, "row": 3 }
    },
    {
      "id": "w1",
      "type": "input",
      "label": "w₁",
      "position": { "cycle": 0, "row": 4 }
    },
    {
      "id": "bias",
      "type": "input",
      "label": "bias",
      "position": { "cycle": 0, "row": 6 }
    },
    {
      "id": "scale",
      "type": "input",
      "label": "scale",
      "position": { "cycle": 0, "row": 8 }
    },
    {
      "id": "mul0",
      "type": "mul",
      "position": { "cycle": 1, "row": 1.5 },
      "inputs": {
        "in1": "x0.out",
        "in2": "w0.out"
      }
    },
    {
      "id": "mul1",
      "type": "mul",
      "position": { "cycle": 1, "row": 3.5 },
      "inputs": {
        "in1": "x1.out",
        "in2": "w1.out"
      }
    },
    {
      "id": "reg_bias1",
      "type": "reg",
      "position": { "cycle": 1, "row": 6 },
      "inputs": { "in": "bias.out" }
    },
    {
      "id": "reg_scale1",
      "type": "reg",
      "position": { "cycle": 1, "row": 8 },
      "inputs": { "in": "scale.out" }
    },
    {
      "id": "add1",
      "type": "add",
      "position": { "cycle": 2, "row": 2.5 },
      "inputs": {
        "in1": "mul0.out",
        "in2": "mul1.out"
      }
    },
    {
      "id": "reg_bias2",
      "type": "reg",
      "position": { "cycle": 2, "row": 6 },
      "inputs": { "in": "reg_bias1.out" }
    },
    {
      "id": "reg_scale2",
      "type": "reg",
      "position": { "cycle": 2, "row": 8 },
      "inputs": { "in": "reg_scale1.out" }
    },
    {
      "id": "add2",
      "type": "add",
      "position": { "cycle": 3, "row": 5 },
      "inputs": {
        "in1": "add1.out",
        "in2": "reg_bias2.out"
      }
    },
    {
      "id": "reg_scale3",
      "type": "reg",
      "position": { "cycle": 3, "row": 8 },
      "inputs": { "in": "reg_scale2.out" }
    },
    {
      "id": "relu1",
      "type": "relu2",
      "position": { "cycle": 4, "row": 5 },
      "inputs": { "in": "add2.out" }
    },
    {
      "id": "reg_scale4",
      "type": "reg",
      "position": { "cycle": 4, "row": 8 },
      "inputs": { "in": "reg_scale3.out" }
    },
    {
      "id": "mul2",
      "type": "mul",
      "position": { "cycle": 5, "row": 5 },
      "inputs": {
        "in1": "relu1.out",
        "in2": "reg_scale4.out"
      }
    },
    {
      "id": "clamp1",
      "type": "clamp",
      "position": { "cycle": 6, "row": 5 },
      "inputs": { "in": "mul2.out" }
    },
    {
      "id": "output1",
      "type": "output",
      "label": "y",
      "position": { "cycle": 7, "row": 5 },
      "inputs": { "in": "clamp1.out" }
    }
  ],
  
  "compounds": [
    {
      "id": "quantized_linear",
      "type": "computational_block",
      "interface": {
        "inputs": ["in_x0", "in_w0", "in_x1", "in_w1", "in_bias", "in_scale"],
        "outputs": ["out"]
      },
      "implementation": {
        "primitives": [
          {
            "id": "mul0",
            "type": "mul",
            "position": { "cycle": 1, "row": 1 }
          },
          {
            "id": "mul1",
            "type": "mul",
            "position": { "cycle": 1, "row": 3 }
          },
          {
            "id": "reg_bias1",
            "type": "reg",
            "position": { "cycle": 1, "row": 5 }
          },
          {
            "id": "add1",
            "type": "add",
            "position": { "cycle": 2, "row": 2 }
          },
          {
            "id": "reg_bias2",
            "type": "reg",
            "position": { "cycle": 2, "row": 5 }
          },
          {
            "id": "add2",
            "type": "add",
            "position": { "cycle": 3, "row": 3 }
          },
          {
            "id": "relu1",
            "type": "relu2",
            "position": { "cycle": 4, "row": 3 }
          },
          {
            "id": "reg_scale1",
            "type": "reg",
            "position": { "cycle": 1, "row": 7 }
          },
          {
            "id": "reg_scale2",
            "type": "reg",
            "position": { "cycle": 2, "row": 7 }
          },
          {
            "id": "reg_scale3",
            "type": "reg",
            "position": { "cycle": 3, "row": 7 }
          },
          {
            "id": "reg_scale4",
            "type": "reg",
            "position": { "cycle": 4, "row": 7 }
          },
          {
            "id": "mul2",
            "type": "mul",
            "position": { "cycle": 5, "row": 3 }
          },
          {
            "id": "clamp1",
            "type": "clamp",
            "position": { "cycle": 6, "row": 3 }
          }
        ],
        "connections": [
          { "from": "EXTERNAL.in_x0", "to": "mul0.in1" },
          { "from": "EXTERNAL.in_w0", "to": "mul0.in2" },
          { "from": "EXTERNAL.in_x1", "to": "mul1.in1" },
          { "from": "EXTERNAL.in_w1", "to": "mul1.in2" },
          { "from": "EXTERNAL.in_bias", "to": "reg_bias1.in" },
          { "from": "EXTERNAL.in_scale", "to": "reg_scale1.in" },
          { "from": "mul0.out", "to": "add1.in1" },
          { "from": "mul1.out", "to": "add1.in2" },
          { "from": "reg_bias1.out", "to": "reg_bias2.in" },
          { "from": "reg_bias2.out", "to": "add2.in2" },
          { "from": "add1.out", "to": "add2.in1" },
          { "from": "add2.out", "to": "relu1.in" },
          { "from": "reg_scale1.out", "to": "reg_scale2.in" },
          { "from": "reg_scale2.out", "to": "reg_scale3.in" },
          { "from": "reg_scale3.out", "to": "reg_scale4.in" },
          { "from": "reg_scale4.out", "to": "mul2.in2" },
          { "from": "relu1.out", "to": "mul2.in1" },
          { "from": "mul2.out", "to": "clamp1.in" },
          { "from": "clamp1.out", "to": "EXTERNAL.out" }
        ]
      },
      "appearance": {
        "label": "Quantized Linear",
        "color": "#e6f7ff",
        "collapsed": true
      }
    }
  ]
}